<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Concept: Message Acknowledgement</title>
        <link rel="stylesheet" href="static/style.css" type="text/css" />
    </head>
    <body>
        <div id="wrapper">
            <h1>Concept: Message Acknowledgement</h1>
            
<a href="index.html">Back to overview</a>

<summary><p>Message acknowledgement requests and how to confirm them.</p>
</summary>

<h2>Description</h2>

<p>Each message defines whether it requires an acknowledgement, when it
should be confirmed, the possible error codes and which message type is
allowed to send a confirmation.</p>
<p>Unless otherwise specified, a message SHOULD be acknowledged <strong>after</strong>
all associated data has been delivered to the server or immediately in
case of an error. In case the app disconnects from the client (e.g. due
to the app being suspended), the client SHOULD wake up the app
recurrently as long as there are pending acknowledgements. This ensures
that all pending messages towards the server are being delivered. All
changes to this protocol SHOULD follow this principle.</p>
<p>An acknowledgement is being requested by setting the <code>id</code> field of the
message. The <code>id</code> MUST be of type <code>String</code> which SHALL contain at least
a single character. In addition, <code>id</code> MUST be unique enough to not clash
with other pending acknowledgement requests.</p>
<p>In case the message that requested the acknowledgement has been processed
completely, a confirmation MUST be sent. The confirmation is part of a
message in which the <code>ack</code> field MUST be set to the below displayed
<code>Map</code>. Each message requesting an acknowledgement defines under which
circumstances the confirmation is a <em>success</em> or an <em>error</em>. In case of a
<em>success</em>, the acknowledgement SHOULD only be confirmed with the defined
message types. On <em>error</em>, the confirmation SHOULD be sent in form of an
<a href="message-update-confirm-fromapp.html"><code>update/confirm</code></a> message.</p>



    
        
        <table>
    <thead>
        <tr>
            <th>Field</th>
            <th>Description</th>
            <th>Type</th>
            <th>Optional</th>
            <th>Nullable</th>
            
        </tr>
    </thead>
    <tbody>
        
        <tr>
            <td>id</td>
            <td>
                <p>The id of the corresponding acknowledgement request</p>

                
            </td>
            <td>String</td>
            <td>False</td>
            <td>False</td>
            
        </tr>
        
        <tr>
            <td>success</td>
            <td>
                <p>Whether the confirmation indicates a <em>success</em></p>

                
            </td>
            <td>Boolean</td>
            <td>False</td>
            <td>False</td>
            
        </tr>
        
        <tr>
            <td>error</td>
            <td>
                <p>The error code which MUST be presented in case <code>success=false</code> and
MUST be one of the error codes defined by the message that requested
the acknowledgement</p>

                
            </td>
            <td>String</td>
            <td>True</td>
            <td>False</td>
            
        </tr>
        
    </tbody>
</table>
    



            <footer>
            <p>&copy; 2018 Threema GmbH</p>
            </footer>
        </div>
    </body>
</html>